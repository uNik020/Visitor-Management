<div class="bg-image">
  <div class="container">
    <div class="card">
      <h2 class="title">Forgot Password</h2>

      <!-- Step 1: Email -->
      <form class="form" id="emailStep" (ngSubmit)="onSendOtp($event)">
        <label for="email">Email:</label>
        <input
          type="email"
          id="email"
          [(ngModel)]="email"
          name="email"
          placeholder="Enter Registered Mail ID"
          required
        />
        <p class="error" id="emailError">{{ emailError }}</p>
        <button type="submit">Send OTP</button>
      </form>

      <!-- Step 2: OTP -->
      <form class="form hidden" id="otpStep" (ngSubmit)="onVerifyOtp($event)">
        <label for="otp">Enter OTP</label>
        <input
          type="text"
          id="otp"
          [(ngModel)]="otp"
          name="otp"
          required
        />
        <p class="error" id="otpError">{{ otpError }}</p>
        <a href="#" class="resend-link" (click)="restartFlow()">Want to resend OTP?</a>
        <button type="submit">Verify OTP</button>
      </form>

      <!-- Step 3: Reset Password -->
      <form class="form hidden" id="resetStep" (ngSubmit)="onResetPassword($event)">
        <label for="password">New Password</label>
        <div class="input-group">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            [(ngModel)]="password"
            name="password"
            required
          />
          <span class="toggle-icon" (click)="toggleVisibility('password')">üëÅÔ∏è</span>
        </div>
        <p class="error" id="passwordError">{{ passwordError }}</p>

        <label for="confirmPassword">Confirm Password</label>
        <div class="input-group">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmPassword"
            [(ngModel)]="confirmPassword"
            name="confirmPassword"
            required
          />
          <span class="toggle-icon" (click)="toggleVisibility('confirmPassword')">üëÅÔ∏è</span>
        </div>
        <p class="error" id="confirmPasswordError">{{ confirmPasswordError }}</p>

        <button type="submit">Reset Password</button>
      </form>

      <!-- Step 4: Done -->
      <div class="done hidden" id="doneStep">
        <p>Your password has been reset. Redirecting to login...</p>
        <button (click)="restartFlow()">Back to Start</button>
      </div>
    </div>
  </div>
</div>
